A/B-тест: конверсия и значимость (кейс Profi.ru)
Что это за проект

Пет-проект с разбором данных Profi.ru: сравнение двух вариантов (A и B) по конверсии.
Фокус — честная агрегация по дням, накопительные метрики, проверка статистической значимости и аккуратная работа со спарсными данными на уровне spec_id.

Цель

Ответить на вопрос: даёт ли вариант B улучшение конверсии относительно A?
Дополнительно — понять, как распределяются показы/ответы по spec_id и не прячется ли эффект в «хвостах».

Данные

Источник: выгрузка из Profi.ru (персданные и файлы не выкладываются).

Ключевые поля:

case_id — группа эксперимента (A/B)

d_view — дата (день)

view — показы/просмотры (ID событий)

response — целевые отклики (ID событий)

spec_id — сущность/объект (товар/креатив/спецпроект и т.п.)

В репозитории оставлен путь data/example.xlsx как заглушка; загрузи свои данные локально.

Что я сделал

Агрегация по дню и группе: посчитал дневные уникальные view/response, затем накопительные суммы и накопительную конверсию response/view.

График разницы B–A (в п.п.) по датам: наглядно видно знак и динамику эффекта.

Z-тест двух долей (cumulative): посчитал p-value на каждом шаге накопления и вывел лог-шкалу p-value для читаемости.

Проверка спарсности по spec_id: describe() показал длинный хвост и много нулей → аккуратно интерпретируем «среднее по spec».

Бутстреп (пересэмплирование с возвращением): оценил доверительные интервалы для средних view/response по A и B и для разницы между ними.

Рефакторинг ноутбука: добавил читаемые графики, комментарии, разделил этапы анализа, подготовил структуру репозитория.

Результаты (tl;dr)

Конверсия: разница B − A < 0 большую часть периода — порядка −6…−3 п.п.

Статзначимость: по накопительным данным p-value становится очень маленьким (на лог-графике уходит далеко вниз) → различие не похоже на шум.

Вывод по тесту: B хуже A по конверсии. Рекомендация — оставлять A, вариант B не выкатывать.

Уровень spec_id: распределение разреженное (много нулей, длинный хвост). Бутстреп средних по spec_id даёт широкие CI и перекрытие → устойчивого отличия на этом срезе нет (это не противоречит общему выводу по конверсии).

Что важно учитывать (ограничения)

Накопительные p-values по дням не независимы. Они иллюстрируют рост уверенности, но финальный вывод делается по сумме за весь период + CI для разницы.

SRM (равномерность сплита A/B) желательно проверить отдельно.

Важно фиксировать единицу рандомизации (пользователь/сессия), иначе возможна зависимость наблюдений.

На уровне spec_id используйте порог по объёму (например, view ≥ 20) или взвешивание, чтобы снизить шум хвостов.
